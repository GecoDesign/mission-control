<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SEO Performance Tracker - geco.design</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #333;
            padding: 20px;
            min-height: 100vh;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 16px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
        }

        header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        header p {
            opacity: 0.9;
            font-size: 1.1em;
        }

        .tabs {
            display: flex;
            background: #f8f9fa;
            border-bottom: 2px solid #e9ecef;
            overflow-x: auto;
        }

        .tab {
            padding: 15px 25px;
            cursor: pointer;
            border: none;
            background: transparent;
            font-size: 1em;
            font-weight: 500;
            color: #666;
            transition: all 0.3s;
            white-space: nowrap;
        }

        .tab:hover {
            background: rgba(102, 126, 234, 0.1);
            color: #667eea;
        }

        .tab.active {
            color: #667eea;
            border-bottom: 3px solid #667eea;
            font-weight: 600;
        }

        .tab-content {
            display: none;
            padding: 30px;
            animation: fadeIn 0.3s;
        }

        .tab-content.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .insights-panel {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
            padding: 25px;
            border-radius: 12px;
            margin-bottom: 30px;
        }

        .insights-panel h2 {
            margin-bottom: 15px;
            font-size: 1.5em;
        }

        .insight-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }

        .insight-card {
            background: rgba(255,255,255,0.2);
            padding: 15px;
            border-radius: 8px;
            backdrop-filter: blur(10px);
        }

        .insight-card h3 {
            font-size: 0.9em;
            opacity: 0.9;
            margin-bottom: 8px;
        }

        .insight-card .value {
            font-size: 1.8em;
            font-weight: bold;
        }

        .insight-card .trend {
            font-size: 0.9em;
            margin-top: 5px;
        }

        .trend.up { color: #4ade80; }
        .trend.down { color: #f87171; }
        .trend.neutral { color: #fbbf24; }

        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }

        .form-group {
            display: flex;
            flex-direction: column;
        }

        label {
            font-weight: 600;
            margin-bottom: 8px;
            color: #555;
            font-size: 0.95em;
        }

        input, select, textarea {
            padding: 12px;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            font-size: 1em;
            transition: all 0.3s;
        }

        input:focus, select:focus, textarea:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        button {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            font-size: 1em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }

        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }

        button:active {
            transform: translateY(0);
        }

        button.secondary {
            background: #6c757d;
        }

        button.danger {
            background: #dc3545;
        }

        .chart-container {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 12px;
            margin-bottom: 20px;
            height: 400px;
            position: relative;
        }

        .data-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }

        .data-table th {
            background: #667eea;
            color: white;
            padding: 12px;
            text-align: left;
            font-weight: 600;
        }

        .data-table td {
            padding: 12px;
            border-bottom: 1px solid #e9ecef;
        }

        .data-table tr:hover {
            background: #f8f9fa;
        }

        .action-buttons {
            display: flex;
            gap: 10px;
            margin-top: 20px;
            flex-wrap: wrap;
        }

        .competitor-entry {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 12px;
            margin-bottom: 15px;
        }

        .keyword-entry {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .goal-card {
            background: linear-gradient(135deg, #4ade80 0%, #22c55e 100%);
            color: white;
            padding: 20px;
            border-radius: 12px;
            margin-bottom: 15px;
        }

        .goal-progress {
            background: rgba(255,255,255,0.3);
            height: 30px;
            border-radius: 15px;
            overflow: hidden;
            margin-top: 10px;
        }

        .goal-progress-bar {
            background: white;
            height: 100%;
            transition: width 0.5s;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: #22c55e;
        }

        .recommendations {
            background: #fff3cd;
            border-left: 4px solid #ffc107;
            padding: 15px;
            margin-top: 15px;
            border-radius: 4px;
        }

        .recommendations ul {
            margin-left: 20px;
            margin-top: 10px;
        }

        .recommendations li {
            margin-bottom: 8px;
        }

        .metric-badge {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 12px;
            font-size: 0.85em;
            font-weight: 600;
            margin-left: 8px;
        }

        .metric-badge.excellent { background: #d1fae5; color: #065f46; }
        .metric-badge.good { background: #dbeafe; color: #1e40af; }
        .metric-badge.fair { background: #fef3c7; color: #92400e; }
        .metric-badge.poor { background: #fee2e2; color: #991b1b; }

        .empty-state {
            text-align: center;
            padding: 60px 20px;
            color: #999;
        }

        .empty-state svg {
            width: 100px;
            height: 100px;
            margin-bottom: 20px;
            opacity: 0.3;
        }

        @media (max-width: 768px) {
            .container {
                border-radius: 0;
            }

            header h1 {
                font-size: 1.8em;
            }

            .tab {
                padding: 12px 15px;
                font-size: 0.9em;
            }

            .tab-content {
                padding: 15px;
            }

            .form-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>üìä SEO Performance Tracker</h1>
            <p>Track and optimize geco.design's search performance</p>
        </header>

        <div class="tabs">
            <button class="tab active" onclick="switchTab('dashboard')">Dashboard</button>
            <button class="tab" onclick="switchTab('metrics')">Add Metrics</button>
            <button class="tab" onclick="switchTab('keywords')">Keywords</button>
            <button class="tab" onclick="switchTab('competitors')">Competitors</button>
            <button class="tab" onclick="switchTab('goals')">Goals</button>
            <button class="tab" onclick="switchTab('data')">View Data</button>
        </div>

        <!-- Dashboard Tab -->
        <div id="dashboard" class="tab-content active">
            <div class="insights-panel">
                <h2>üéØ Quick Insights</h2>
                <div id="quickInsights"></div>
                <div class="recommendations" id="recommendations"></div>
            </div>

            <div class="chart-container">
                <canvas id="metricsChart"></canvas>
            </div>

            <div class="chart-container">
                <canvas id="competitorChart"></canvas>
            </div>

            <div class="chart-container" style="height: 300px;">
                <canvas id="keywordChart"></canvas>
            </div>
        </div>

        <!-- Add Metrics Tab -->
        <div id="metrics" class="tab-content">
            <h2 style="margin-bottom: 20px;">üìà Add Performance Metrics</h2>
            <form id="metricsForm" onsubmit="addMetric(event)">
                <div class="form-grid">
                    <div class="form-group">
                        <label for="metricDate">Date</label>
                        <input type="date" id="metricDate" required>
                    </div>
                    <div class="form-group">
                        <label for="organicTraffic">Organic Traffic</label>
                        <input type="number" id="organicTraffic" placeholder="e.g., 1250" required>
                    </div>
                    <div class="form-group">
                        <label for="avgPosition">Average Position</label>
                        <input type="number" step="0.1" id="avgPosition" placeholder="e.g., 12.5">
                    </div>
                    <div class="form-group">
                        <label for="backlinks">Total Backlinks</label>
                        <input type="number" id="backlinks" placeholder="e.g., 89">
                    </div>
                    <div class="form-group">
                        <label for="domainAuthority">Domain Authority</label>
                        <input type="number" id="domainAuthority" placeholder="e.g., 42" min="0" max="100">
                    </div>
                    <div class="form-group">
                        <label for="indexedPages">Indexed Pages</label>
                        <input type="number" id="indexedPages" placeholder="e.g., 156">
                    </div>
                </div>
                <div class="form-group">
                    <label for="notes">Notes (optional)</label>
                    <textarea id="notes" rows="3" placeholder="Any important changes, content published, etc."></textarea>
                </div>
                <div class="action-buttons">
                    <button type="submit">üíæ Save Metrics</button>
                    <button type="button" class="secondary" onclick="document.getElementById('metricsForm').reset()">Clear</button>
                </div>
            </form>
        </div>

        <!-- Keywords Tab -->
        <div id="keywords" class="tab-content">
            <h2 style="margin-bottom: 20px;">üîç Keyword Position Tracker</h2>
            <form id="keywordForm" onsubmit="addKeyword(event)">
                <div class="form-grid">
                    <div class="form-group">
                        <label for="keyword">Keyword</label>
                        <input type="text" id="keyword" placeholder="e.g., web design london" required>
                    </div>
                    <div class="form-group">
                        <label for="keywordDate">Date</label>
                        <input type="date" id="keywordDate" required>
                    </div>
                    <div class="form-group">
                        <label for="position">Position</label>
                        <input type="number" id="position" placeholder="e.g., 8" min="1" required>
                    </div>
                    <div class="form-group">
                        <label for="searchVolume">Search Volume (optional)</label>
                        <input type="number" id="searchVolume" placeholder="e.g., 1200">
                    </div>
                </div>
                <div class="action-buttons">
                    <button type="submit">üíæ Track Keyword</button>
                    <button type="button" class="secondary" onclick="document.getElementById('keywordForm').reset()">Clear</button>
                </div>
            </form>

            <div id="keywordList" style="margin-top: 30px;"></div>
        </div>

        <!-- Competitors Tab -->
        <div id="competitors" class="tab-content">
            <h2 style="margin-bottom: 20px;">üéØ Competitor Analysis</h2>
            <form id="competitorForm" onsubmit="addCompetitorData(event)">
                <div class="form-grid">
                    <div class="form-group">
                        <label for="competitorName">Competitor</label>
                        <input type="text" id="competitorName" placeholder="e.g., competitor.com" required list="competitorList">
                        <datalist id="competitorList"></datalist>
                    </div>
                    <div class="form-group">
                        <label for="compDate">Date</label>
                        <input type="date" id="compDate" required>
                    </div>
                    <div class="form-group">
                        <label for="compTraffic">Estimated Traffic</label>
                        <input type="number" id="compTraffic" placeholder="e.g., 2500">
                    </div>
                    <div class="form-group">
                        <label for="compDA">Domain Authority</label>
                        <input type="number" id="compDA" placeholder="e.g., 58" min="0" max="100">
                    </div>
                    <div class="form-group">
                        <label for="compBacklinks">Backlinks</label>
                        <input type="number" id="compBacklinks" placeholder="e.g., 340">
                    </div>
                </div>
                <div class="action-buttons">
                    <button type="submit">üíæ Save Competitor Data</button>
                    <button type="button" class="secondary" onclick="document.getElementById('competitorForm').reset()">Clear</button>
                </div>
            </form>

            <div id="competitorsList" style="margin-top: 30px;"></div>
        </div>

        <!-- Goals Tab -->
        <div id="goals" class="tab-content">
            <h2 style="margin-bottom: 20px;">üéØ SEO Goals</h2>
            <form id="goalForm" onsubmit="addGoal(event)">
                <div class="form-grid">
                    <div class="form-group">
                        <label for="goalName">Goal Name</label>
                        <input type="text" id="goalName" placeholder="e.g., Reach 5000 monthly visitors" required>
                    </div>
                    <div class="form-group">
                        <label for="goalMetric">Metric</label>
                        <select id="goalMetric" required>
                            <option value="traffic">Organic Traffic</option>
                            <option value="da">Domain Authority</option>
                            <option value="backlinks">Backlinks</option>
                            <option value="position">Avg Position</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="goalTarget">Target Value</label>
                        <input type="number" id="goalTarget" placeholder="e.g., 5000" required>
                    </div>
                    <div class="form-group">
                        <label for="goalDeadline">Target Date</label>
                        <input type="date" id="goalDeadline" required>
                    </div>
                </div>
                <div class="action-buttons">
                    <button type="submit">üíæ Create Goal</button>
                    <button type="button" class="secondary" onclick="document.getElementById('goalForm').reset()">Clear</button>
                </div>
            </form>

            <div id="goalsList" style="margin-top: 30px;"></div>
        </div>

        <!-- View Data Tab -->
        <div id="data" class="tab-content">
            <h2 style="margin-bottom: 20px;">üìã All Data</h2>
            <div class="action-buttons">
                <button onclick="exportToCSV()">üì• Export to CSV</button>
                <button class="danger" onclick="clearAllData()">üóëÔ∏è Clear All Data</button>
            </div>

            <h3 style="margin-top: 30px; margin-bottom: 15px;">Performance Metrics</h3>
            <div id="metricsTable"></div>

            <h3 style="margin-top: 30px; margin-bottom: 15px;">Keyword Data</h3>
            <div id="keywordsTable"></div>

            <h3 style="margin-top: 30px; margin-bottom: 15px;">Competitor Data</h3>
            <div id="competitorsTable"></div>
        </div>
    </div>

    <script>
        // Data storage
        let metrics = JSON.parse(localStorage.getItem('seoMetrics')) || [];
        let keywords = JSON.parse(localStorage.getItem('seoKeywords')) || [];
        let competitors = JSON.parse(localStorage.getItem('seoCompetitors')) || [];
        let goals = JSON.parse(localStorage.getItem('seoGoals')) || [];

        // Chart instances
        let metricsChart, competitorChart, keywordChart;

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            document.getElementById('metricDate').valueAsDate = new Date();
            document.getElementById('keywordDate').valueAsDate = new Date();
            document.getElementById('compDate').valueAsDate = new Date();
            
            updateDashboard();
            updateDataTables();
            updateKeywordList();
            updateCompetitorsList();
            updateGoalsList();
        });

        function switchTab(tabName) {
            // Update tab buttons
            document.querySelectorAll('.tab').forEach(tab => tab.classList.remove('active'));
            event.target.classList.add('active');

            // Update tab content
            document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));
            document.getElementById(tabName).classList.add('active');

            // Refresh charts when switching to dashboard
            if (tabName === 'dashboard') {
                updateDashboard();
            }
        }

        function addMetric(event) {
            event.preventDefault();
            
            const metric = {
                date: document.getElementById('metricDate').value,
                traffic: parseInt(document.getElementById('organicTraffic').value),
                position: parseFloat(document.getElementById('avgPosition').value) || null,
                backlinks: parseInt(document.getElementById('backlinks').value) || null,
                da: parseInt(document.getElementById('domainAuthority').value) || null,
                indexedPages: parseInt(document.getElementById('indexedPages').value) || null,
                notes: document.getElementById('notes').value
            };

            metrics.push(metric);
            metrics.sort((a, b) => new Date(a.date) - new Date(b.date));
            localStorage.setItem('seoMetrics', JSON.stringify(metrics));

            alert('‚úÖ Metrics saved successfully!');
            document.getElementById('metricsForm').reset();
            document.getElementById('metricDate').valueAsDate = new Date();
            updateDashboard();
            updateDataTables();
        }

        function addKeyword(event) {
            event.preventDefault();
            
            const keywordData = {
                keyword: document.getElementById('keyword').value,
                date: document.getElementById('keywordDate').value,
                position: parseInt(document.getElementById('position').value),
                volume: parseInt(document.getElementById('searchVolume').value) || null
            };

            keywords.push(keywordData);
            keywords.sort((a, b) => new Date(a.date) - new Date(b.date));
            localStorage.setItem('seoKeywords', JSON.stringify(keywords));

            alert('‚úÖ Keyword tracked successfully!');
            document.getElementById('keywordForm').reset();
            document.getElementById('keywordDate').valueAsDate = new Date();
            updateKeywordList();
            updateDataTables();
            updateDashboard();
        }

        function addCompetitorData(event) {
            event.preventDefault();
            
            const compData = {
                name: document.getElementById('competitorName').value,
                date: document.getElementById('compDate').value,
                traffic: parseInt(document.getElementById('compTraffic').value) || null,
                da: parseInt(document.getElementById('compDA').value) || null,
                backlinks: parseInt(document.getElementById('compBacklinks').value) || null
            };

            competitors.push(compData);
            competitors.sort((a, b) => new Date(a.date) - new Date(b.date));
            localStorage.setItem('seoCompetitors', JSON.stringify(competitors));

            // Update competitor list for autocomplete
            updateCompetitorDatalist();

            alert('‚úÖ Competitor data saved!');
            document.getElementById('competitorForm').reset();
            document.getElementById('compDate').valueAsDate = new Date();
            updateCompetitorsList();
            updateDataTables();
            updateDashboard();
        }

        function addGoal(event) {
            event.preventDefault();
            
            const goal = {
                id: Date.now(),
                name: document.getElementById('goalName').value,
                metric: document.getElementById('goalMetric').value,
                target: parseFloat(document.getElementById('goalTarget').value),
                deadline: document.getElementById('goalDeadline').value,
                created: new Date().toISOString().split('T')[0]
            };

            goals.push(goal);
            localStorage.setItem('seoGoals', JSON.stringify(goals));

            alert('‚úÖ Goal created!');
            document.getElementById('goalForm').reset();
            updateGoalsList();
            updateDashboard();
        }

        function updateDashboard() {
            updateQuickInsights();
            updateMetricsChart();
            updateCompetitorChart();
            updateKeywordChart();
        }

        function updateQuickInsights() {
            const container = document.getElementById('quickInsights');
            const recsContainer = document.getElementById('recommendations');

            if (metrics.length === 0) {
                container.innerHTML = '<p style="text-align: center; opacity: 0.8;">Add your first metrics to see insights!</p>';
                recsContainer.innerHTML = '';
                return;
            }

            const latest = metrics[metrics.length - 1];
            const previous = metrics[metrics.length - 2];

            const insights = [];
            const recommendations = [];

            // Traffic insight
            if (latest.traffic) {
                const change = previous ? ((latest.traffic - previous.traffic) / previous.traffic * 100) : 0;
                const trend = change > 0 ? 'up' : change < 0 ? 'down' : 'neutral';
                const arrow = change > 0 ? '‚Üó' : change < 0 ? '‚Üò' : '‚Üí';
                insights.push(`
                    <div class="insight-card">
                        <h3>Organic Traffic</h3>
                        <div class="value">${latest.traffic.toLocaleString()}</div>
                        <div class="trend ${trend}">${arrow} ${Math.abs(change).toFixed(1)}% vs last entry</div>
                    </div>
                `);

                if (change < -10) {
                    recommendations.push('Traffic dropped significantly. Check for algorithm updates or technical issues.');
                } else if (change > 20) {
                    recommendations.push('Great traffic growth! Analyze what content is driving this increase.');
                }
            }

            // Domain Authority insight
            if (latest.da) {
                const badge = latest.da >= 60 ? 'excellent' : latest.da >= 40 ? 'good' : latest.da >= 20 ? 'fair' : 'poor';
                insights.push(`
                    <div class="insight-card">
                        <h3>Domain Authority</h3>
                        <div class="value">${latest.da}<span class="metric-badge ${badge}">DA</span></div>
                    </div>
                `);

                if (latest.da < 30) {
                    recommendations.push('Focus on building quality backlinks to improve domain authority.');
                }
            }

            // Backlinks insight
            if (latest.backlinks) {
                const change = previous && previous.backlinks ? latest.backlinks - previous.backlinks : 0;
                insights.push(`
                    <div class="insight-card">
                        <h3>Total Backlinks</h3>
                        <div class="value">${latest.backlinks}</div>
                        ${change !== 0 ? `<div class="trend ${change > 0 ? 'up' : 'down'}">${change > 0 ? '+' : ''}${change} new</div>` : ''}
                    </div>
                `);
            }

            // Position insight
            if (latest.position) {
                insights.push(`
                    <div class="insight-card">
                        <h3>Avg Position</h3>
                        <div class="value">${latest.position.toFixed(1)}</div>
                    </div>
                `);

                if (latest.position > 20) {
                    recommendations.push('Average position is low. Focus on on-page SEO and content optimization.');
                }
            }

            // Keyword insights
            const uniqueKeywords = [...new Set(keywords.map(k => k.keyword))];
            if (uniqueKeywords.length > 0) {
                const topKeywords = uniqueKeywords.slice(0, 5);
                let keywordImprovements = 0;
                topKeywords.forEach(kw => {
                    const kwData = keywords.filter(k => k.keyword === kw).sort((a, b) => new Date(a.date) - new Date(b.date));
                    if (kwData.length >= 2) {
                        if (kwData[kwData.length - 1].position < kwData[kwData.length - 2].position) {
                            keywordImprovements++;
                        }
                    }
                });

                insights.push(`
                    <div class="insight-card">
                        <h3>Tracked Keywords</h3>
                        <div class="value">${uniqueKeywords.length}</div>
                        ${keywordImprovements > 0 ? `<div class="trend up">‚Üó ${keywordImprovements} improving</div>` : ''}
                    </div>
                `);
            }

            container.innerHTML = `<div class="insight-grid">${insights.join('')}</div>`;

            // Recommendations
            if (metrics.length < 4) {
                recommendations.push('Track metrics consistently over time to identify trends and patterns.');
            }

            if (keywords.length < 5) {
                recommendations.push('Track more keywords to get better visibility into your search performance.');
            }

            if (competitors.length === 0) {
                recommendations.push('Add competitor data to benchmark your performance against others in your niche.');
            }

            if (recommendations.length > 0) {
                recsContainer.innerHTML = `
                    <h3 style="margin-bottom: 10px;">üí° Recommendations</h3>
                    <ul>${recommendations.map(r => `<li>${r}</li>`).join('')}</ul>
                `;
            } else {
                recsContainer.innerHTML = '<h3>‚ú® You\'re doing great! Keep tracking your metrics regularly.</h3>';
            }
        }

        function updateMetricsChart() {
            const ctx = document.getElementById('metricsChart');
            if (!ctx) return;

            if (metricsChart) {
                metricsChart.destroy();
            }

            if (metrics.length === 0) {
                ctx.parentElement.innerHTML = '<div class="empty-state"><p>No metrics data yet. Add your first entry in the "Add Metrics" tab!</p></div>';
                return;
            }

            const dates = metrics.map(m => m.date);
            const traffic = metrics.map(m => m.traffic);
            const backlinks = metrics.map(m => m.backlinks);
            const da = metrics.map(m => m.da);

            metricsChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: dates,
                    datasets: [
                        {
                            label: 'Organic Traffic',
                            data: traffic,
                            borderColor: '#667eea',
                            backgroundColor: 'rgba(102, 126, 234, 0.1)',
                            tension: 0.4,
                            yAxisID: 'y',
                        },
                        {
                            label: 'Backlinks',
                            data: backlinks,
                            borderColor: '#f093fb',
                            backgroundColor: 'rgba(240, 147, 251, 0.1)',
                            tension: 0.4,
                            yAxisID: 'y',
                        },
                        {
                            label: 'Domain Authority',
                            data: da,
                            borderColor: '#4ade80',
                            backgroundColor: 'rgba(74, 222, 128, 0.1)',
                            tension: 0.4,
                            yAxisID: 'y1',
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    interaction: {
                        mode: 'index',
                        intersect: false,
                    },
                    plugins: {
                        title: {
                            display: true,
                            text: 'SEO Performance Over Time',
                            font: { size: 16, weight: 'bold' }
                        },
                        legend: {
                            display: true,
                            position: 'top',
                        }
                    },
                    scales: {
                        y: {
                            type: 'linear',
                            display: true,
                            position: 'left',
                            title: {
                                display: true,
                                text: 'Traffic / Backlinks'
                            }
                        },
                        y1: {
                            type: 'linear',
                            display: true,
                            position: 'right',
                            title: {
                                display: true,
                                text: 'Domain Authority'
                            },
                            grid: {
                                drawOnChartArea: false,
                            },
                            max: 100
                        }
                    }
                }
            });
        }

        function updateCompetitorChart() {
            const ctx = document.getElementById('competitorChart');
            if (!ctx) return;

            if (competitorChart) {
                competitorChart.destroy();
            }

            if (competitors.length === 0 || metrics.length === 0) {
                ctx.parentElement.innerHTML = '<div class="empty-state"><p>Add competitor data to see comparisons!</p></div>';
                return;
            }

            const competitorNames = [...new Set(competitors.map(c => c.name))];
            const latestDate = metrics[metrics.length - 1].date;
            const myLatest = metrics[metrics.length - 1];

            const data = {
                labels: ['geco.design', ...competitorNames],
                datasets: [
                    {
                        label: 'Estimated Traffic',
                        data: [
                            myLatest.traffic,
                            ...competitorNames.map(name => {
                                const compData = competitors.filter(c => c.name === name);
                                return compData.length > 0 ? compData[compData.length - 1].traffic : 0;
                            })
                        ],
                        backgroundColor: ['#667eea', '#f093fb', '#fbbf24', '#4ade80', '#f87171'],
                    }
                ]
            };

            competitorChart = new Chart(ctx, {
                type: 'bar',
                data: data,
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        title: {
                            display: true,
                            text: 'Traffic Comparison (Latest Data)',
                            font: { size: 16, weight: 'bold' }
                        },
                        legend: {
                            display: false
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            title: {
                                display: true,
                                text: 'Estimated Traffic'
                            }
                        }
                    }
                }
            });
        }

        function updateKeywordChart() {
            const ctx = document.getElementById('keywordChart');
            if (!ctx) return;

            if (keywordChart) {
                keywordChart.destroy();
            }

            if (keywords.length === 0) {
                ctx.parentElement.innerHTML = '<div class="empty-state"><p>Track keywords to see position trends!</p></div>';
                return;
            }

            const uniqueKeywords = [...new Set(keywords.map(k => k.keyword))];
            const datasets = uniqueKeywords.slice(0, 5).map((kw, i) => {
                const kwData = keywords.filter(k => k.keyword === kw).sort((a, b) => new Date(a.date) - new Date(b.date));
                const colors = ['#667eea', '#f093fb', '#4ade80', '#fbbf24', '#f87171'];
                return {
                    label: kw,
                    data: kwData.map(k => ({ x: k.date, y: k.position })),
                    borderColor: colors[i % colors.length],
                    backgroundColor: colors[i % colors.length] + '33',
                    tension: 0.4
                };
            });

            keywordChart = new Chart(ctx, {
                type: 'line',
                data: { datasets },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        title: {
                            display: true,
                            text: 'Keyword Position Trends (Lower is Better)',
                            font: { size: 16, weight: 'bold' }
                        }
                    },
                    scales: {
                        y: {
                            reverse: true,
                            title: {
                                display: true,
                                text: 'Position'
                            },
                            ticks: {
                                stepSize: 1
                            }
                        },
                        x: {
                            type: 'time',
                            time: {
                                unit: 'day'
                            },
                            title: {
                                display: true,
                                text: 'Date'
                            }
                        }
                    }
                }
            });
        }

        function updateKeywordList() {
            const container = document.getElementById('keywordList');
            const uniqueKeywords = [...new Set(keywords.map(k => k.keyword))];

            if (uniqueKeywords.length === 0) {
                container.innerHTML = '<div class="empty-state"><p>No keywords tracked yet.</p></div>';
                return;
            }

            let html = '<h3 style="margin-bottom: 15px;">Tracked Keywords</h3>';
            uniqueKeywords.forEach(kw => {
                const kwData = keywords.filter(k => k.keyword === kw).sort((a, b) => new Date(b.date) - new Date(a.date));
                const latest = kwData[0];
                const previous = kwData[1];
                const change = previous ? latest.position - previous.position : 0;
                const trend = change < 0 ? 'up' : change > 0 ? 'down' : 'neutral';
                const arrow = change < 0 ? '‚Üó' : change > 0 ? '‚Üò' : '‚Üí';

                html += `
                    <div class="keyword-entry">
                        <div>
                            <strong>${kw}</strong>
                            <div style="font-size: 0.9em; color: #666; margin-top: 5px;">
                                Position: <strong>${latest.position}</strong>
                                ${change !== 0 ? `<span class="trend ${trend}" style="margin-left: 10px;">${arrow} ${Math.abs(change)}</span>` : ''}
                                ${latest.volume ? ` | Volume: ${latest.volume}` : ''}
                            </div>
                        </div>
                        <button class="danger" onclick="deleteKeyword('${kw}')" style="padding: 8px 16px;">Delete</button>
                    </div>
                `;
            });

            container.innerHTML = html;
        }

        function updateCompetitorsList() {
            const container = document.getElementById('competitorsList');
            const uniqueCompetitors = [...new Set(competitors.map(c => c.name))];

            if (uniqueCompetitors.length === 0) {
                container.innerHTML = '<div class="empty-state"><p>No competitor data yet.</p></div>';
                return;
            }

            let html = '<h3 style="margin-bottom: 15px;">Competitors</h3>';
            uniqueCompetitors.forEach(name => {
                const compData = competitors.filter(c => c.name === name).sort((a, b) => new Date(b.date) - new Date(a.date));
                const latest = compData[0];

                html += `
                    <div class="competitor-entry">
                        <h4 style="margin-bottom: 10px;">${name}</h4>
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 15px;">
                            ${latest.traffic ? `<div><strong>Traffic:</strong> ${latest.traffic.toLocaleString()}</div>` : ''}
                            ${latest.da ? `<div><strong>DA:</strong> ${latest.da}</div>` : ''}
                            ${latest.backlinks ? `<div><strong>Backlinks:</strong> ${latest.backlinks}</div>` : ''}
                        </div>
                        <div style="margin-top: 10px;">
                            <button class="danger" onclick="deleteCompetitor('${name}')" style="padding: 8px 16px;">Delete</button>
                        </div>
                    </div>
                `;
            });

            container.innerHTML = html;
        }

        function updateGoalsList() {
            const container = document.getElementById('goalsList');

            if (goals.length === 0) {
                container.innerHTML = '<div class="empty-state"><p>No goals set yet. Create your first goal!</p></div>';
                return;
            }

            const metricMap = {
                'traffic': { label: 'Organic Traffic', getData: () => metrics.length > 0 ? metrics[metrics.length - 1].traffic : 0 },
                'da': { label: 'Domain Authority', getData: () => metrics.length > 0 ? metrics[metrics.length - 1].da : 0 },
                'backlinks': { label: 'Backlinks', getData: () => metrics.length > 0 ? metrics[metrics.length - 1].backlinks : 0 },
                'position': { label: 'Avg Position', getData: () => metrics.length > 0 ? metrics[metrics.length - 1].position : 0 }
            };

            let html = '';
            goals.forEach(goal => {
                const current = metricMap[goal.metric].getData() || 0;
                const progress = Math.min((current / goal.target) * 100, 100);
                const daysLeft = Math.ceil((new Date(goal.deadline) - new Date()) / (1000 * 60 * 60 * 24));

                html += `
                    <div class="goal-card">
                        <div style="display: flex; justify-content: space-between; align-items: start;">
                            <div>
                                <h3>${goal.name}</h3>
                                <p style="opacity: 0.9; margin-top: 5px;">
                                    ${metricMap[goal.metric].label}: ${current} / ${goal.target}
                                </p>
                            </div>
                            <button class="danger" onclick="deleteGoal(${goal.id})" style="padding: 8px 16px;">Delete</button>
                        </div>
                        <div class="goal-progress">
                            <div class="goal-progress-bar" style="width: ${progress}%">
                                ${progress.toFixed(0)}%
                            </div>
                        </div>
                        <p style="margin-top: 10px; opacity: 0.9;">
                            ${daysLeft > 0 ? `${daysLeft} days left` : 'Deadline passed'} ‚Ä¢ Target: ${new Date(goal.deadline).toLocaleDateString()}
                        </p>
                    </div>
                `;
            });

            container.innerHTML = html;
        }

        function updateDataTables() {
            // Metrics table
            const metricsTable = document.getElementById('metricsTable');
            if (metrics.length === 0) {
                metricsTable.innerHTML = '<p style="color: #999;">No metrics data.</p>';
            } else {
                let html = '<table class="data-table"><thead><tr><th>Date</th><th>Traffic</th><th>Avg Pos</th><th>Backlinks</th><th>DA</th><th>Pages</th><th>Notes</th><th>Action</th></tr></thead><tbody>';
                metrics.slice().reverse().forEach((m, i) => {
                    html += `<tr>
                        <td>${m.date}</td>
                        <td>${m.traffic.toLocaleString()}</td>
                        <td>${m.position || '-'}</td>
                        <td>${m.backlinks || '-'}</td>
                        <td>${m.da || '-'}</td>
                        <td>${m.indexedPages || '-'}</td>
                        <td>${m.notes || '-'}</td>
                        <td><button class="danger" onclick="deleteMetric(${metrics.length - 1 - i})" style="padding: 6px 12px; font-size: 0.9em;">Delete</button></td>
                    </tr>`;
                });
                html += '</tbody></table>';
                metricsTable.innerHTML = html;
            }

            // Keywords table
            const keywordsTable = document.getElementById('keywordsTable');
            if (keywords.length === 0) {
                keywordsTable.innerHTML = '<p style="color: #999;">No keyword data.</p>';
            } else {
                let html = '<table class="data-table"><thead><tr><th>Keyword</th><th>Date</th><th>Position</th><th>Volume</th></tr></thead><tbody>';
                keywords.slice().reverse().forEach(k => {
                    html += `<tr>
                        <td>${k.keyword}</td>
                        <td>${k.date}</td>
                        <td>${k.position}</td>
                        <td>${k.volume || '-'}</td>
                    </tr>`;
                });
                html += '</tbody></table>';
                keywordsTable.innerHTML = html;
            }

            // Competitors table
            const competitorsTable = document.getElementById('competitorsTable');
            if (competitors.length === 0) {
                competitorsTable.innerHTML = '<p style="color: #999;">No competitor data.</p>';
            } else {
                let html = '<table class="data-table"><thead><tr><th>Competitor</th><th>Date</th><th>Traffic</th><th>DA</th><th>Backlinks</th></tr></thead><tbody>';
                competitors.slice().reverse().forEach(c => {
                    html += `<tr>
                        <td>${c.name}</td>
                        <td>${c.date}</td>
                        <td>${c.traffic || '-'}</td>
                        <td>${c.da || '-'}</td>
                        <td>${c.backlinks || '-'}</td>
                    </tr>`;
                });
                html += '</tbody></table>';
                competitorsTable.innerHTML = html;
            }
        }

        function updateCompetitorDatalist() {
            const datalist = document.getElementById('competitorList');
            const uniqueCompetitors = [...new Set(competitors.map(c => c.name))];
            datalist.innerHTML = uniqueCompetitors.map(name => `<option value="${name}">`).join('');
        }

        function deleteMetric(index) {
            if (confirm('Delete this metric entry?')) {
                metrics.splice(index, 1);
                localStorage.setItem('seoMetrics', JSON.stringify(metrics));
                updateDashboard();
                updateDataTables();
            }
        }

        function deleteKeyword(keyword) {
            if (confirm(`Delete all data for keyword "${keyword}"?`)) {
                keywords = keywords.filter(k => k.keyword !== keyword);
                localStorage.setItem('seoKeywords', JSON.stringify(keywords));
                updateKeywordList();
                updateDataTables();
                updateDashboard();
            }
        }

        function deleteCompetitor(name) {
            if (confirm(`Delete all data for "${name}"?`)) {
                competitors = competitors.filter(c => c.name !== name);
                localStorage.setItem('seoCompetitors', JSON.stringify(competitors));
                updateCompetitorsList();
                updateDataTables();
                updateDashboard();
                updateCompetitorDatalist();
            }
        }

        function deleteGoal(id) {
            if (confirm('Delete this goal?')) {
                goals = goals.filter(g => g.id !== id);
                localStorage.setItem('seoGoals', JSON.stringify(goals));
                updateGoalsList();
            }
        }

        function exportToCSV() {
            let csv = 'SEO PERFORMANCE DATA EXPORT\n\n';
            
            // Metrics
            csv += 'PERFORMANCE METRICS\n';
            csv += 'Date,Organic Traffic,Avg Position,Backlinks,Domain Authority,Indexed Pages,Notes\n';
            metrics.forEach(m => {
                csv += `${m.date},${m.traffic},${m.position || ''},${m.backlinks || ''},${m.da || ''},${m.indexedPages || ''},"${m.notes || ''}"\n`;
            });
            
            csv += '\n\nKEYWORD TRACKING\n';
            csv += 'Keyword,Date,Position,Search Volume\n';
            keywords.forEach(k => {
                csv += `"${k.keyword}",${k.date},${k.position},${k.volume || ''}\n`;
            });
            
            csv += '\n\nCOMPETITOR DATA\n';
            csv += 'Competitor,Date,Traffic,Domain Authority,Backlinks\n';
            competitors.forEach(c => {
                csv += `"${c.name}",${c.date},${c.traffic || ''},${c.da || ''},${c.backlinks || ''}\n`;
            });

            csv += '\n\nGOALS\n';
            csv += 'Goal,Metric,Target,Deadline,Created\n';
            goals.forEach(g => {
                csv += `"${g.name}",${g.metric},${g.target},${g.deadline},${g.created}\n`;
            });

            const blob = new Blob([csv], { type: 'text/csv' });
            const url = window.URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `seo-data-${new Date().toISOString().split('T')[0]}.csv`;
            a.click();
            window.URL.revokeObjectURL(url);
        }

        function clearAllData() {
            if (confirm('‚ö†Ô∏è This will delete ALL data permanently. Are you sure?')) {
                if (confirm('This cannot be undone. Export your data first if needed. Continue?')) {
                    metrics = [];
                    keywords = [];
                    competitors = [];
                    goals = [];
                    localStorage.clear();
                    alert('‚úÖ All data cleared.');
                    location.reload();
                }
            }
        }
    </script>
</body>
</html>